/* infinite-scroll v0.4.1 - 2015-06-28T01:41:34.521Z - https://github.com/r-park/infinite-scroll */
!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.InfiniteScroll=i()}(this,function(){"use strict";function t(t){eventEmitter(["load:ready","load:start","load:end"],this),this.autoLoad=t.autoLoad!==!1,this.currentPage=0,this.finished=!1,this.itemSelector=t.item,this.nextSelector=t.next,this.requestConfig={context:this,dataType:"html"},this.updatePagination($(this.nextSelector)),this.waitForImages=!!t.waitForImages,this.listener=new i({activeZone:t.activeZone||200,callback:function(){this.autoLoad?this.load():this.emit("load:ready")}.bind(this)})}function i(t){var i=null;this.activeZone=t.activeZone||200,this.callback=t.callback,this.listening=!1,this.onScroll=function(){i&&clearTimeout(i),i=setTimeout(this.resolve,100)}.bind(this),this.resolve=function(){this.validate()&&(this.stop(),this.callback())}.bind(this)}return t.prototype={load:function(){return this.finished?void 0:(this.emit("load:start"),$.ajax(this.requestConfig).then(function(t){var i=$("<div>"+t+"</div>"),e=i.find(this.itemSelector),n=i.find(this.nextSelector);i=null,this.updatePagination(n),this.waitForImages?e.imagesReady().then(this.postLoad.bind(this)):this.postLoad(e)}))},postLoad:function(t){var i={items:t,page:this.currentPage},e=this;this.emit("load:end",i,function(){e.start()})},start:function(){this.finished||this.listener.start()},stop:function(){this.listener.stop()},updatePagination:function(t){this.currentPage++,t.length?this.requestConfig.url=t.attr("href"):this.finished=!0}},i.prototype={start:function(){this.listening||(this.validate()?this.callback():(this.listening=!0,window.addEventListener("scroll",this.onScroll)))},stop:function(){this.listening&&(window.removeEventListener("scroll",this.onScroll),this.listening=!1)},validate:function(){return window.innerHeight+window.pageYOffset>=document.body.scrollHeight-this.activeZone}},t});
//# sourceMappingURL=infinite-scroll.min.js.map