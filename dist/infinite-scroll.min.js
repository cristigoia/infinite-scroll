/* infinite-scroll v0.2.1 - 2015-06-26T00:29:06.248Z - https://github.com/r-park/infinite-scroll */
!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.InfiniteScroll=i()}(this,function(){"use strict";function t(t){eventEmitter(["load:start","load:end","end"],this),this.autoLoad=t.autoLoad!==!1,this.container=$(t.container),this.finished=!1,t.inject&&(this.inject=t.inject),this.item=t.item,this.pagination=t.pagination,this.requestConfig={context:this,dataType:"html",url:$(this.pagination).attr("href")},this.waitForImages=!!t.waitForImages,this.watcher=new i({buffer:t.scrollBuffer,callback:function(){this.autoLoad&&this.load()}.bind(this)})}function i(t){this.buffer=t.buffer||150,this.callback=t.callback,this.watching=!1,this.listener=function(){this.validate()&&(this.stop(),this.callback())}.bind(this)}return t.prototype={inject:function(t){t&&this.container.append(t)},load:function(){return this.finished?void 0:(this.emit("load:start"),$.ajax(this.requestConfig).then(this.process))},process:function(t){var i=$("<div>"+t+"</div>"),n=i.find(this.item);this.updatePagination(i),this.waitForImages?n.imagesReady().then(function(){this.emit("load:end"),this.inject(n),this.start()}.bind(this)):(this.emit("load:end"),this.inject(n),this.start())},start:function(){this.finished||this.watcher.start()},stop:function(){this.watcher.stop()},updatePagination:function(t){var i=t.find(this.pagination);i.length?this.requestConfig.url=i.attr("href"):(this.finished=!0,this.emit("end"))}},i.prototype={start:function(){this.watching||(this.validate()?this.callback():(this.watching=!0,window.addEventListener("scroll",this.listener)))},stop:function(){window.removeEventListener("scroll",this.listener),this.watching=!1},validate:function(){return window.innerHeight+window.pageYOffset>=document.body.scrollHeight-this.buffer}},t});
//# sourceMappingURL=infinite-scroll.min.js.map