/* infinite-scroll v0.3.0 - 2015-06-26T06:35:50.973Z - https://github.com/r-park/infinite-scroll */
!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.InfiniteScroll=i()}(this,function(){"use strict";function t(t){eventEmitter(["load:start","load:end"],this),this.autoLoad=t.autoLoad!==!1,this.currentPage=1,this.finished=!1,this.itemSelector=t.item,this.paginationSelector=t.pagination,this.requestConfig={context:this,dataType:"html",url:$(this.paginationSelector).attr("href")},this.waitForImages=!!t.waitForImages,this.watcher=new i({buffer:t.scrollBuffer,callback:function(){this.autoLoad&&this.load()}.bind(this)})}function i(t){this.buffer=t.buffer||150,this.callback=t.callback,this.watching=!1,this.listener=function(){this.validate()&&(this.stop(),this.callback())}.bind(this)}return t.prototype={load:function(){return this.finished?void 0:(this.emit("load:start"),$.ajax(this.requestConfig).then(function(t){var i=$("<div>"+t+"</div>"),e=i.find(this.itemSelector),n=i.find(this.paginationSelector);i=null,this.updatePagination(n),this.waitForImages?e.imagesReady().then(this.postLoad.bind(this)):this.postLoad(e)}))},postLoad:function(t){var i={items:t,page:this.currentPage},e=this;this.emit("load:end",i,function(){e.start()})},start:function(){this.finished||this.watcher.start()},stop:function(){this.watcher.stop()},updatePagination:function(t){this.currentPage++,t.length?this.requestConfig.url=t.attr("href"):this.finished=!0}},i.prototype={start:function(){this.watching||(this.validate()?this.callback():(this.watching=!0,window.addEventListener("scroll",this.listener)))},stop:function(){window.removeEventListener("scroll",this.listener),this.watching=!1},validate:function(){return window.innerHeight+window.pageYOffset>=document.body.scrollHeight-this.buffer}},t});
//# sourceMappingURL=infinite-scroll.min.js.map